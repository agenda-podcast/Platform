id: deliver_email
name: deliver_email
kind: delivery
version: "1.0.0"

entrypoint:
  runtime: python
  path: src/run.py

requirements:
  secrets:
    required:
      - EMAIL_SMTP_HOST
      - EMAIL_SMTP_PORT
      - EMAIL_FROM_EMAIL
    optional:
      - EMAIL_SMTP_USERNAME
      - EMAIL_SMTP_PASSWORD
  vars:
    optional:
      - EMAIL_SMTP_USE_TLS

contract:
  inputs:
    - id: recipient_email
      kind: string
      required: true
    - id: subject
      kind: string
      required: false
      default_json: '"Your delivery"'
    - id: body
      kind: string
      required: false
      default_json: '"Attached is your requested deliverable."'
    - id: package_zip
      kind: file
      required: true
    - id: manifest_json
      kind: file
      required: false

  outputs:
    - id: delivery_receipt_json
      kind: file
      required: true
    - id: delivery_log_json
      kind: file
      required: true
    - id: report_json
      kind: file
      required: true

deliverables:
  - id: __run__
    outputs:
      - delivery_receipt_json
      - delivery_log_json
      - report_json
